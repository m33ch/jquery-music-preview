(function(c){var b={},h;c.musicPreview=function(a,f){var d=c.Deferred();if(a===undefined||a=="")return d.reject(b.artist_required);if(f===undefined||f=="")return d.reject(b.title_required);var e="http://developer.echonest.com/api/v4/song/search?api_key={{api_key}}&format=json&results=1&artist={{artist}}&title={{title}}&bucket=id:7digital-US&bucket=audio_summary&bucket=tracks".replace("{{api_key}}","QNR9YFKVAPUN3PGLL").replace("{{artist}}",a).replace("{{title}}",f);e=c.getJSON(e);e.success(function(g){h.call(d,
g)});e.error(function(g){d.reject(c.extend({},b.request_error,{data:g}))});return d.promise()};h=function(a){if(a.response.songs.length<=0)return this.reject(b.no_songs_found);if(a.response.songs[0].tracks===undefined||a.response.songs[0].tracks.length<=0)return this.reject(b.no_preview_found);return this.resolve(c.extend({},b.success,{preview_url:a.response.songs[0].tracks[0].preview_url}))};b={artist_required:{status:"error",message:"Artist required"},title_required:{status:"error",message:"Song title required"},
requeset_error:{status:"error",message:"Can not connect to Echonest API"},no_songs_found:{status:"error",message:"No soungs found"},no_preview_found:{status:"error",message:"No preview found"},success:{status:"success",message:"Preview found"}}})(jQuery);
